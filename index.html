<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles.css" />
    <link rel="icon" type="image/x-icon" href="images/favicon.png">
    <title>Study Buddy</title>
  </head>
  <body style="background-color: #e6e6e6">
    <!-- Website Shared Content -->
    <div id="shared-content"></div>

    <!--main elements -->
    <!-- todolist -->
    <div class="todo-list">
      <!--Each item in todo list-->
      <h1>To-do List</h1>
      <button class="todo-remove-button" id="remove1">X</button>
      <p id="item1"></p>
      <button class="todo-remove-button" id="remove2">X</button>
      <p id="item2"></p>
      <button class="todo-remove-button" id="remove3">X</button>
      <p id="item3"></p>
      <button class="todo-remove-button" id="remove4">X</button>
      <p id="item4"></p>
      <button class="todo-remove-button" id="remove5">X</button>
      <p id="item5"></p>
      <button class="todo-remove-button" id="remove6">X</button>
      <p id="item6"></p>
      <button class="todo-remove-button" id="remove7">X</button>
      <p id="item7"></p>
      <button class="todo-remove-button" id="remove8">X</button>
      <p id="item8"></p>
      <button class="todo-remove-button" id="remove9">X</button>
      <p id="item9"></p>
      <button class="todo-remove-button" id="remove10">X</button>
      <p id="item10"></p>
      <!--inputs for user-->
      <div class="todo-add">
        <input
          class="todo-input-box"
          id="todo-input"
          placeholder="Enter Task Here"
        />
        <button class="todo-list-done">Done</button>
      </div>
    </div>
    <!-- todolist end-->
    <!-- chatbot -->
    <div class="chatbot">
      <!--AI response-->
      <h1>AI Help</h1>
      <div class="response-box">
        <p id="response"></p>
      </div>
      <!--inputs for user-->
      <div class="chatbot-input">
        <input
          class="chatbot-input-box"
          id="chatbot-input"
          placeholder="Enter Question Here"
        />
        <button class="chatbot-enter">Enter</button>
      </div>
    </div>
    <!-- chatbot end -->

    <script type="module" src="./User.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", async () => {
        try {
          const response = await fetch("application.html");
          const html = await response.text();
          document.getElementById("shared-content").innerHTML = html;
          await User.loadState();
          await User.initializeUser(); // Wait until user state is fully initialized
        } catch (err) {
          console.error("Error initializing page:", err);
        }
      });
    </script>
  </body>

  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <script src="https://apis.google.com/js/api.js" async defer></script>
  <script src="todolist.js"></script>
  <script type="module" src="chatbot.js"></script>
</html>
