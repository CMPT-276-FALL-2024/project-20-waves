<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles.css" />
    <title>Study Buddy Calendar</title>
  </head>

  <body>
    <header class="header">
      <div class="header-left">
        <div id="notification-container" style="position: relative">
          <button id="notification-bell" class="notification-bell">
            <img
              src="https://cdn-icons-png.flaticon.com/512/1827/1827392.png"
              alt="Bell Icon"
              style="width: 24px; height: 24px"
            />
            <span
              id="notification-badge"
              class="notification-badge"
              style="display: none"
              >0</span
            >
          </button>
          <div
            id="notification-dropdown"
            class="notification-dropdown"
            style="display: none"
          >
            <ul id="notification-list" class="notification-list"></ul>
            <button id="clear-notifications" class="clear-notifications">
              Clear All
            </button>
          </div>
        </div>
      </div>

      <!-- Center: Title -->
      <div class="header-center">
        <a href="./index" class="logo-link">
          <h1 class="logo">Study Buddy</h1>
        </a>
      </div>

      <!-- Right: Google Sign-In/Out -->
      <div class="header-right">
        <div id="auth-controls" style="text-align: right">
          <!-- Sign In Button -->
          <button
            id="sign-in-button"
            class="google-button sign-in"
            onclick="handleSignInClick()"
            style="
              display: block;
              padding: 8px 16px;
              font-size: 14px;
              border-radius: 6px;
            "
          >
            <img
              src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg"
              alt="Google Logo"
              style="vertical-align: middle; margin-right: 8px"
            />
            Sign in with Google
          </button>

          <!-- User Name (Appears after signing in) -->
          <span
            id="user-name"
            style="
              display: none;
              font-weight: bold;
              font-size: 14px;
              color: #333;
              margin-bottom: 5px;
              display: block;
            "
          >
          </span>

          <!-- Sign Out Button (Appears after signing in) -->
          <button
            id="sign-out-button"
            class="google-button sign-out"
            onclick="handleSignOutClick()"
            style="
              display: none;
              padding: 8px 16px;
              font-size: 14px;
              border-radius: 6px;
            "
          >
            Sign Out
          </button>
        </div>
      </div>
    </header>

    <div id="calendar-container">
      <div id="calendar"></div>
    </div>

    <!-- Modals -->
    <!-- Modals -->
    <!-- Modals -->

    <!-- Sign-In Modal -->
    <div id="sign-out-modal" class="modal" style="display: none">
      <div class="modal-content">
        <p>You have successfully signed out.</p>
        <button onclick="closeSignOutModal()">Close</button>
      </div>
    </div>
    <!-- Validation Error Modal -->
    <div id="validation-modal" class="modal" style="display: none">
      <div class="modal-content">
        <p id="validation-message"></p>
        <button onclick="closeValidationModal()">Close</button>
      </div>
    </div>
    <div id="delete-confirmation-modal" class="modal" style="display: none">
      <div class="modal-content">
        <p id="delete-confirmation-message"></p>
        <button id="confirm-delete-button">Yes</button>
        <button id="cancel-delete-button">No</button>
      </div>
    </div>

    <!-- Sidebar for Event Creation and Editing -->
    <div id="event-sidebar" class="event-sidebar">
      <div class="drag-handle">
        <span class="drag-text">☰ Drag</span>
        <button
          id="close-sidebar-button"
          class="close-button"
          title="Close Sidebar"
        >
          ✖
        </button>
      </div>
      <h2>Create Event</h2>

      <!-- Title Input -->
      <label for="event-title">Title:</label>
      <input
        type="text"
        id="event-title"
        name="event-title"
        placeholder="Enter event title"
        required
      />

      <!-- Start Date and Time -->
      <label for="event-start-date">Start Date:</label>
      <input
        type="date"
        id="event-start-date"
        name="event-start-date"
        required
      />
      <label for="event-start-time">Start Time:</label>
      <input
        type="time"
        id="event-start-time"
        name="event-start-time"
        required
      />

      <div>
        <label>
          <input type="checkbox" id="all-day-event-checkbox" /> All Day Event
        </label>
      </div>

      <!-- End Date and Time -->
      <label for="event-end-date">End Date:</label>
      <input type="date" id="event-end-date" name="event-end-date" required />
      <label for="event-end-time">End Time:</label>
      <input type="time" id="event-end-time" name="event-end-time" required />

      <div id="notification-toggle">
        <label>
          <input type="checkbox" id="enable-notifications" /> Notify before
          event
        </label>
      </div>

      <div id="notification-options" style="display: none">
        <h3>Notification Options</h3>

        <!-- Notification Type -->
        <label for="notification-type">Type:</label>
        <select id="notification-type" name="notification-type">
          <option value="popup">Popup</option>
          <option value="email">Email</option>
        </select>

        <!-- Notification Time -->
        <label for="notification-time">Notify me:</label>
        <input
          type="number"
          id="notification-time"
          name="notification-time"
          placeholder="10"
          min="0"
        />
        <select id="notification-time-unit" name="notification-time-unit">
          <option value="minutes">Minutes</option>
          <option value="hours">Hours</option>
          <option value="days">Days</option>
        </select>
      </div>

      <!-- Create Event Button -->
      <button type="button" id="create-event">Create</button>

      <!-- Edit Event Button (Initially hidden) -->
      <button type="button" id="edit-event" style="display: none">
        Save Changes
      </button>

      <!-- Delete Event Button (Initially hidden) -->
      <button type="button" id="delete-event" style="display: none">
        Delete Event
      </button>
    </div>

    <button id="create-event-fab" class="fab">+</button>

    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="https://apis.google.com/js/api.js" async defer></script>
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.js"></script>
    <script src="calendarscripts.js"></script>
  </body>
</html>
